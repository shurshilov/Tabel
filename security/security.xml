<openerp>
    <data>
        <record id="group_manager" model="res.groups">
            <field name="name">Tabel / Admin</field>
        </record>

        <record id="group_import" model="res.groups">
            <field name="name">Tabel / Import</field>
        </record>

        <record id="boss_division_inf" model="res.groups">
            <field name="name">Tabel / Начальник отдела информатизации</field>
        </record> 

        <record id="tabel_division_inf" model="res.groups">
            <field name="name">Tabel / Табельщик отдела информатизации</field>
        </record>
        <record id="done_division_inf" model="res.groups">
            <field name="name">Tabel / Исполнитель отдела информатизации</field>
        </record>
        <record id="group_accountant" model="res.groups">
            <field name="name">Tabel / Бухгалтер</field>
        </record>


	<record id="change only tabel state confitmed2" model="ir.rule">
            <field name="name">Only Responsible can modify Course</field>
            <field name="model_id" ref="model_tabel_tabel"/>
            <field name="groups" eval="[(4, ref('group_accountant'))]"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_create" eval="1"/>
            <field name="perm_unlink" eval="1"/>
            <field name="domain_force">
                ['|', ('state','=','confirmed2'),
                      ('state','=','confirmed2')]
            </field>
        </record>

	<record id="bos3" model="ir.rule">
            <field name="name">Only Responsible can modify Course</field>
            <field name="model_id" ref="model_tabel_tabel"/>
            <field name="groups" eval="[(4, ref('boss_division_inf'))]"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_unlink" eval="0"/>
            <field name="domain_force">
                [ ('state','not in',['draft','confirmed2','done']),('id_division','in',[346,375])  ]
            </field>
        </record>

	<record id="bos2" model="ir.rule">
            <field name="name">Only Responsible can modify Course</field>
            <field name="model_id" ref="model_tabel_tabel"/>
            <field name="groups" eval="[(4, ref('boss_division_inf'))]"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_unlink" eval="0"/>
            <field name="domain_force">
                [ ('state','in',['draft','confirmed2','done']),('id_division','in',[346,375]) ]
            </field>
        </record>

	<record id="inf3" model="ir.rule">
            <field name="name">Табельщик отдела информатизации</field>
            <field name="model_id" ref="model_tabel_tabel"/>
            <field name="groups" eval="[(4, ref('tabel_division_inf'))]"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_create" eval="1"/>
            <field name="perm_unlink" eval="1"/>
            <field name="domain_force">
                [ ('state','not in',['confirmed','confirmed2','done']),('id_division','in',[346,375])  ]
	    </field>
        </record>

	<record id="inf2" model="ir.rule">
            <field name="name">Табельщик отдела информатизации</field>
            <field name="model_id" ref="model_tabel_tabel"/>
            <field name="groups" eval="[(4, ref('tabel_division_inf'))]"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_unlink" eval="0"/>
            <field name="domain_force">
                [ ('state','in',['confirmed','confirmed2','done']),('id_division','in',[346,375]) ]
	    </field>
        </record>

    </data>
</openerp>


